#!/usr/bin/env node
"use strict"

var read        = require('fs').readFileSync
var esprima     = require('esprima')
var Interpreter = require('../main')

var filename = process.argv[2]
var argv     = process.argv.slice(3)
var code     = read(filename, 'utf8')
var ast      = esprima.parse(code)


var interpreter = new Interpreter({
  argv: argv,
})
function p(obj) {
  console.dir(obj, {depth: 5, colors: true})
}
p(interpreter.evaluate(ast))
process.exit(interpreter.exitStatus)
